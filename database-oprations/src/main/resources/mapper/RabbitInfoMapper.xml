<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nwafu.databaseoprations.dao.RabbitInfoMapper">
  <resultMap id="BaseResultMap" type="com.nwafu.databaseoprations.entity.RabbitInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="rabbitNo" jdbcType="VARCHAR" property="rabbitNo" />
    <result column="cageNo" jdbcType="VARCHAR" property="cageNo" />
    <result column="rabbitHouseNo" jdbcType="VARCHAR" property="rabbitHouseNo" />
    <result column="farmUuid" jdbcType="VARCHAR" property="farmUuid" />
    <result column="birthParity" jdbcType="INTEGER" property="birthParity" />
    <result column="initialWeight" jdbcType="DOUBLE" property="initialWeight" />
    <result column="coatGloss" jdbcType="VARCHAR" property="coatGloss" />
    <result column="identicalRabbits" jdbcType="INTEGER" property="identicalRabbits" />
    <result column="economiType" jdbcType="VARCHAR" property="economiType" />
    <result column="sex" jdbcType="VARCHAR" property="sex" />
    <result column="initialAge" jdbcType="VARCHAR" property="initialAge" />
    <result column="fineHairType" jdbcType="VARCHAR" property="fineHairType" />
    <result column="origin" jdbcType="VARCHAR" property="origin" />
    <result column="mainCoatColor" jdbcType="VARCHAR" property="mainCoatColor" />
    <result column="paternalNo" jdbcType="VARCHAR" property="paternalNo" />
    <result column="coatFeature" jdbcType="VARCHAR" property="coatFeature" />
    <result column="maternalNo" jdbcType="VARCHAR" property="maternalNo" />
    <result column="roughType" jdbcType="VARCHAR" property="roughType" />
    <result column="age" jdbcType="INTEGER" property="age" />
    <result column="coatColor" jdbcType="VARCHAR" property="coatColor" />
    <result column="bornDate" jdbcType="TIMESTAMP" property="bornDate" />
    <result column="nipplesNumber" jdbcType="INTEGER" property="nipplesNumber" />
    <result column="photo" jdbcType="LONGVARCHAR" property="photo" />
  </resultMap>
  <insert id="insert" parameterType="java.util.List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into rabbit_info (rabbitNo, cageNo, rabbitHouseNo, farmUuid,  birthParity,
      initialWeight, coatGloss,
      identicalRabbits, economiType, sex, 
      initialAge, fineHairType, origin, 
      mainCoatColor, paternalNo, coatFeature, 
      maternalNo, roughType, age, 
      coatColor, bornDate, nipplesNumber, 
      photo)
    values
    <foreach collection="list" item="item" index="index" separator=",">
      (#{item.rabbitNo,jdbcType=VARCHAR}, #{item.cageNo,jdbcType=VARCHAR}, #{item.rabbitHouseNo,jdbcType=VARCHAR},
      #{item.farmUuid,jdbcType=VARCHAR},#{item.birthParity,jdbcType=INTEGER},#{item.initialWeight,jdbcType=DOUBLE}, #{item.coatGloss,jdbcType=VARCHAR},
      #{item.identicalRabbits,jdbcType=INTEGER}, #{item.economiType,jdbcType=VARCHAR}, #{item.sex,jdbcType=VARCHAR},
      #{item.initialAge,jdbcType=VARCHAR}, #{item.fineHairType,jdbcType=VARCHAR}, #{item.origin,jdbcType=VARCHAR},
      #{item.mainCoatColor,jdbcType=VARCHAR}, #{item.paternalNo,jdbcType=VARCHAR}, #{item.coatFeature,jdbcType=VARCHAR},
      #{item.maternalNo,jdbcType=VARCHAR}, #{item.roughType,jdbcType=VARCHAR}, #{item.age,jdbcType=INTEGER},
      #{item.coatColor,jdbcType=VARCHAR}, #{item.bornDate,jdbcType=TIMESTAMP}, #{item.nipplesNumber,jdbcType=INTEGER},
      #{item.photo,jdbcType=LONGVARCHAR})
    </foreach>

  </insert>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select rabbitNo, cageNo,rabbitHouseNo, farmUuid, birthParity, initialWeight, coatGloss, identicalRabbits,
    economiType, sex, initialAge, fineHairType, origin, mainCoatColor, paternalNo, coatFeature,
    maternalNo, roughType, age, coatColor, bornDate, nipplesNumber, photo
    from rabbit_info
  </select>

  <delete id="deleteRabbitInfoByRabbitNo" parameterType="java.util.List">
    delete from rabbit_info where rabbitNo in
    <foreach close=")" collection="list" item="item" open="(" separator=",">
      #{item}
    </foreach>
  </delete>

  <select id="getFamaleRabbitInfo" resultMap="BaseResultMap">
    select * from rabbit_info where sex="famale"
  </select>

  <select id="getMaleRabbitInfo" resultMap="BaseResultMap">
    select * from rabbit_info where sex="male"
  </select>

  <select id="getLittleRabbitInfo" resultMap="BaseResultMap">
    select * from rabbit_info where age &lt;= 1
  </select>

  <select id="getAllRabbitNo" resultType="java.lang.String">
    select rabbitNo from rabbit_info
  </select>

  <select id="getRabbitInfoByCondition" parameterType="java.lang.String" resultMap="BaseResultMap">
    select * from rabbit_info where ${condition}=#{value}
  </select>
  
  <select id="getTotalByCondition" parameterType="java.lang.String" resultType="java.lang.Integer">
    select count(*) from rabbit_info where ${type} and farmUuid=#{farmUuid}
  </select>

  <select id="getMaleCountByCondition" parameterType="java.lang.String" resultType="java.lang.Integer">
    select count(*) from rabbit_info where ${type} and farmUuid=#{farmUuid} and sex="male"
  </select>

  <select id="getFemaleCountByCondition" parameterType="java.lang.String" resultType="java.lang.Integer">
    select count(*) from rabbit_info where ${type} and farmUuid=#{farmUuid} and sex="female"
  </select>
  
  <select id="getMaleRabbitCount" parameterType="java.lang.String" resultType="java.lang.Integer">
    select count(*) from rabbit_info where farmUuid=#{farmUuid} and sex="male"
  </select>

  <select id="getFemaleRabbitCount" parameterType="java.lang.String" resultType="java.lang.Integer">
    select count(*) from rabbit_info where farmUuid=#{farmUuid} and sex="female"
  </select>
</mapper>