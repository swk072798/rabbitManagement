<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nwafu.databaseoprations.dao.RabbitChangeRecordMapper">
  <resultMap id="BaseResultMap" type="com.nwafu.databaseoprations.entity.RabbitChangeRecord">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="recordId" jdbcType="INTEGER" property="recordId" />
    <result column="rabbitNo" jdbcType="VARCHAR" property="rabbitNo" />
    <result column="sex" jdbcType="VARCHAR" property="sex" />
    <result column="oldCageNo" jdbcType="VARCHAR" property="oldCageNo" />
    <result column="oldRabbitHouseNo" jdbcType="VARCHAR" property="oldRabbitHouseNo" />
    <result column="newCageNo" jdbcType="VARCHAR" property="newCageNo" />
    <result column="newRabbitHouseNo" jdbcType="VARCHAR" property="newRabbitHouseNo" />
    <result column="actionUser" jdbcType="VARCHAR" property="actionUser" />
    <result column="changeDate" jdbcType="TIMESTAMP" property="changeDate" />
  </resultMap>
  <insert id="insert" parameterType="com.nwafu.databaseoprations.entity.RabbitChangeRecord">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into rabbit_change_record (recordId, rabbitNo, sex, 
      oldCageNo, oldRabbitHouseNo, newCageNo, 
      newRabbitHouseNo, actionUser, changeDate
      )
    values (#{recordId,jdbcType=INTEGER}, #{rabbitNo,jdbcType=VARCHAR}, #{sex,jdbcType=VARCHAR}, 
      #{oldCageNo,jdbcType=VARCHAR}, #{oldRabbitHouseNo,jdbcType=VARCHAR}, #{newCageNo,jdbcType=VARCHAR}, 
      #{newRabbitHouseNo,jdbcType=VARCHAR}, #{actionUser,jdbcType=VARCHAR}, #{changeDate,jdbcType=TIMESTAMP}
      )
  </insert>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select recordId, rabbitNo, sex, oldCageNo, oldRabbitHouseNo, newCageNo, newRabbitHouseNo, 
    actionUser, changeDate
    from rabbit_change_record
  </select>

  <select id="getInRabbitCount" resultType="java.lang.Integer" parameterType="java.lang.String">
    SELECT count(*) from rabbit_change_record where newRabbitHouseNo=#{rabbitHouseNo} and changeDate &gt; #{startDate} and changeDate &lt; #{endDate}
  </select>

  <select id="getOutRabbitCount" resultType="java.lang.Integer" parameterType="java.lang.String">
    SELECT count(*) from rabbit_change_record where oldRabbitHouseNo=#{rabbitHosueNo} and changeDate &gt; #{startDate} and changeDate &lt; #{endDate}
  </select>
</mapper>